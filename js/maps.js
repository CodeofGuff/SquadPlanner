export const maps = {
    // AAS Layers
    'AlBasrah_AAS_1': {
        name: 'Al Basrah: AAS v1',
        path: 'assets/maps/AlBasrah_AAS_1.png',
        category: 'AAS Layers',
        size: '2048x2048'
    },
    'Anvil_AAS_1': {
        name: 'Anvil: AAS v1',
        path: 'assets/maps/Anvil_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'BelayaPass_AAS_1': {
        name: 'Belaya Pass: AAS v1',
        path: 'assets/maps/BelayaPass_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'BelayaPass_AAS_2': {
        name: 'Belaya Pass: AAS v2',
        path: 'assets/maps/BelayaPass_AAS_2.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'BlackCoast_AAS_1': {
        name: 'Black Coast: AAS v1',
        path: 'assets/maps/BlackCoast_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'BlackCoast_AAS_2': {
        name: 'Black Coast: AAS v2',
        path: 'assets/maps/BlackCoast_AAS_2.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Chora_AAS_1': {
        name: 'Chora: AAS v1',
        path: 'assets/maps/Chora_AAS_1.png',
        category: 'AAS Layers',
        size: '2048x2048'
    },
    'Fallujah_AAS_1': {
        name: 'Fallujah: AAS v1',
        path: 'assets/maps/Fallujah_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Fallujah_AAS_2': {
        name: 'Fallujah: AAS v2',
        path: 'assets/maps/Fallujah_AAS_2.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Fallujah_AAS_3': {
        name: 'Fallujah: AAS v3',
        path: 'assets/maps/Fallujah_AAS_3.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Foolsroad_AAS_1': {
        name: 'Fools Road: AAS v1',
        path: 'assets/maps/Foolsroad_AAS_1.png',
        category: 'AAS Layers',
        size: '2048x2048'
    },
    'Goosebay_AAS_1': {
        name: 'Goose Bay: AAS v1',
        path: 'assets/maps/Goosebay_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Gorodok_AAS_1': {
        name: 'Gorodok: AAS v1',
        path: 'assets/maps/Gorodok_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Harju_AAS_1': {
        name: 'Harju: AAS v1',
        path: 'assets/maps/Harju_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Kamdesh_AAS_1': {
        name: 'Kamdesh: AAS v1',
        path: 'assets/maps/Kamdesh_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Kohat_AAS_1': {
        name: 'Kohat: AAS v1',
        path: 'assets/maps/Kohat_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Lashkar_AAS_1': {
        name: 'Lashkar Valley: AAS v1',
        path: 'assets/maps/Lashkar_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Logar_AAS_1': {
        name: 'Logar Valley: AAS v1',
        path: 'assets/maps/Logar_AAS_1.png',
        category: 'AAS Layers',
        size: '2048x2048'
    },
    'Manic_AAS_1': {
        name: 'Manic-5: AAS v1',
        path: 'assets/maps/Manic_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Mestia_AAS_1': {
        name: 'Mestia: AAS v1',
        path: 'assets/maps/Mestia_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Mutaha_AAS_1': {
        name: 'Mutaha: AAS v1',
        path: 'assets/maps/Mutaha_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Narva_AAS_1': {
        name: 'Narva: AAS v1',
        path: 'assets/maps/Narva_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Skorpo_AAS_1': {
        name: 'Skorpo: AAS v1',
        path: 'assets/maps/Skorpo_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Sumari_AAS_1': {
        name: 'Sumari: AAS v1',
        path: 'assets/maps/Sumari_AAS_1.png',
        category: 'AAS Layers',
        size: '2048x2048'
    },
    'Tallil_AAS_1': {
        name: 'Tallil Outskirts: AAS v1',
        path: 'assets/maps/Tallil_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },
    'Yehorivka_AAS_1': {
        name: 'Yehorivka: AAS v1',
        path: 'assets/maps/Yehorivka_AAS_1.png',
        category: 'AAS Layers',
        size: '4096x4096'
    },

    // Skirmish Layers
    'AlBasrah_Skirmish_1': {
        name: 'Al Basrah: Skirmish v1',
        path: 'assets/maps/AlBasrah_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '2048x2048'
    },
    'Anvil_Skirmish_1': {
        name: 'Anvil: Skirmish v1',
        path: 'assets/maps/Anvil_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'BelayaPass_Skirmish_1': {
        name: 'Belaya Pass: Skirmish v1',
        path: 'assets/maps/BelayaPass_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'BlackCoast_Skirmish_1': {
        name: 'Black Coast: Skirmish v1',
        path: 'assets/maps/BlackCoast_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Chora_Skirmish_1': {
        name: 'Chora: Skirmish v1',
        path: 'assets/maps/Chora_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '2048x2048'
    },
    'Fallujah_Skirmish_1': {
        name: 'Fallujah: Skirmish v1',
        path: 'assets/maps/Fallujah_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Foolsroad_Skirmish_1': {
        name: 'Fools Road: Skirmish v1',
        path: 'assets/maps/Foolsroad_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '2048x2048'
    },
    'Goosebay_Skirmish_1': {
        name: 'Goose Bay: Skirmish v1',
        path: 'assets/maps/Goosebay_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Gorodok_Skirmish_1': {
        name: 'Gorodok: Skirmish v1',
        path: 'assets/maps/Gorodok_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Harju_Skirmish_1': {
        name: 'Harju: Skirmish v1',
        path: 'assets/maps/Harju_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Kamdesh_Skirmish_1': {
        name: 'Kamdesh: Skirmish v1',
        path: 'assets/maps/Kamdesh_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Kohat_Skirmish_1': {
        name: 'Kohat: Skirmish v1',
        path: 'assets/maps/Kohat_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Lashkar_Skirmish_1': {
        name: 'Lashkar Valley: Skirmish v1',
        path: 'assets/maps/Lashkar_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Logar_Skirmish_1': {
        name: 'Logar Valley: Skirmish v1',
        path: 'assets/maps/Logar_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '2048x2048'
    },
    'Manic_Skirmish_1': {
        name: 'Manic-5: Skirmish v1',
        path: 'assets/maps/Manic_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Mestia_Skirmish_1': {
        name: 'Mestia: Skirmish v1',
        path: 'assets/maps/Mestia_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Mutaha_Skirmish_1': {
        name: 'Mutaha: Skirmish v1',
        path: 'assets/maps/Mutaha_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Narva_Skirmish_1': {
        name: 'Narva: Skirmish v1',
        path: 'assets/maps/Narva_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Skorpo_Skirmish_1': {
        name: 'Skorpo: Skirmish v1',
        path: 'assets/maps/Skorpo_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Sumari_Skirmish_1': {
        name: 'Sumari: Skirmish v1',
        path: 'assets/maps/Sumari_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '2048x2048'
    },
    'Tallil_Skirmish_1': {
        name: 'Tallil Outskirts: Skirmish v1',
        path: 'assets/maps/Tallil_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    },
    'Yehorivka_Skirmish_1': {
        name: 'Yehorivka: Skirmish v1',
        path: 'assets/maps/Yehorivka_Skirmish_1.png',
        category: 'Skirmish Layers',
        size: '4096x4096'
    }
};

export const mapUtils = {
    // Get all map categories
    getCategories() {
        return [...new Set(Object.values(maps).map(map => map.category))];
    },

    // Get maps in a category
    getMapsInCategory(category) {
        return Object.entries(maps)
            .filter(([_, map]) => map.category === category)
            .map(([key, map]) => ({
                key,
                ...map
            }));
    },

    // Populate the map select dropdown
    populateMapSelect(selectElement) {
        // Clear existing options except first two
        while (selectElement.childNodes.length > 2) {
            selectElement.removeChild(selectElement.lastChild);
        }

        // Add maps by category
        this.getCategories().forEach(category => {
            const optgroup = document.createElement('optgroup');
            optgroup.label = category;

            this.getMapsInCategory(category).forEach(map => {
                const option = document.createElement('option');
                option.value = map.key;
                option.textContent = map.name;
                optgroup.appendChild(option);
            });

            selectElement.appendChild(optgroup);
        });
    },

    // Get map data
    getMapData(key) {
        return maps[key];
    },

    // Add preload method
    async preloadMap(mapKey) {
        const mapData = this.getMapData(mapKey);
        if (!mapData) return null;

        return new Promise((resolve, reject) => {
            const img = new Image();
            img.onload = () => resolve(img);
            img.onerror = reject;
            img.src = mapData.path;
        });
    },

    // Initialize map selection with preloading
    async initializeMapSelect() {
        const mapSelect = document.getElementById('mapSelect');
        if (!mapSelect) return;
        
        this.populateMapSelect(mapSelect);

        // Preload first map of each category
        try {
            const categories = this.getCategories();
            for (const category of categories) {
                const firstMap = this.getMapsInCategory(category)[0];
                if (firstMap) {
                    await this.preloadMap(firstMap.key);
                }
            }
        } catch (error) {
            console.error('Error preloading maps:', error);
        }
    }
}; 