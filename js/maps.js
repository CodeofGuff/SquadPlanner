export const mapData = {
    "AAS Layers": [
        { value: "assets/maps/AlBasrah_AAS_1.png", text: "Al Basrah: AAS v1", size: 3199 },
        { value: "assets/maps/Anvil_AAS_1.png", text: "Anvil: AAS v1", size: 3500 },
        { value: "assets/maps/BelayaPass_AAS_1.png", text: "Belaya Pass: AAS v1", size: 3910 },
        { value: "assets/maps/BelayaPass_AAS_2.png", text: "Belaya Pass: AAS v2", size: 3910 },
        { value: "assets/maps/BelayaPass_AAS_3.png", text: "Belaya Pass: AAS v3", size: 3910 },
        { value: "assets/maps/BlackCoast_AAS_1.png", text: "Black Coast: AAS v1", size: 3800 },
        { value: "assets/maps/BlackCoast_AAS_2.png", text: "Black Coast: AAS v2", size: 3800 },
        { value: "assets/maps/Chora_AAS_1.png", text: "Chora: AAS v1", size: 4078 },
        { value: "assets/maps/Chora_AAS_2.png", text: "Chora: AAS v2", size: 4078 },
        { value: "assets/maps/Chora_AAS_3.png", text: "Chora: AAS v3", size: 4078 },
        { value: "assets/maps/Fallujah_AAS_1.png", text: "Fallujah: AAS v1", size: 3500 },
        { value: "assets/maps/FoolsRoad_AAS_1.png", text: "Fool's Road: AAS v1", size: 1732 },
        { value: "assets/maps/FoolsRoad_AAS_2.png", text: "Fool's Road: AAS v2", size: 1732 },
        { value: "assets/maps/GooseBay_AAS_1.png", text: "Goose Bay: AAS v1", size: 3500 },
        { value: "assets/maps/Gorodok_AAS_1.png", text: "Gorodok: AAS v1", size: 4320 },
        { value: "assets/maps/Harju_AAS_1.png", text: "Harju: AAS v1", size: 3200 },
        { value: "assets/maps/Harju_AAS_2.png", text: "Harju: AAS v2", size: 3200 },
        { value: "assets/maps/Harju_AAS_3.png", text: "Harju: AAS v3", size: 3200 },
        { value: "assets/maps/KamdeshHighlands_AAS_1.png", text: "Kamdesh Highlands: AAS v1", size: 3600 },
        { value: "assets/maps/KohatToi_AAS_1.png", text: "Kohat Toi: AAS v1", size: 3999 },
        { value: "assets/maps/Kokan_AAS_1.png", text: "Kokan: AAS v1", size: 2489 },
        { value: "assets/maps/Kokan_AAS_2.png", text: "Kokan: AAS v2", size: 2489 },
        { value: "assets/maps/LashkarValley_AAS_1.png", text: "Lashkar Valley: AAS v1", size: 3200 },
        { value: "assets/maps/LashkarValey_AAS_2.png", text: "Lashkar Valley: AAS v2", size: 3200 },
        { value: "assets/maps/LogarValley_AAS_1.png", text: "Logar Valley: AAS v1", size: 1763 },
        { value: "assets/maps/Manicougan_AAS_1.png", text: "Manicougan: AAS v1", size: 3800 },
        { value: "assets/maps/Manicougan_AAS_2.png", text: "Manicougan: AAS v2", size: 3800 },
        { value: "assets/maps/Manicougan_AAS_3.png", text: "Manicougan: AAS v3", size: 3800 },
        { value: "assets/maps/Mestia_AAS_1.png", text: "Mestia: AAS v1", size: 2393 },
        { value: "assets/maps/Mestia_AAS_2.png", text: "Mestia: AAS v2", size: 2393 },
        { value: "assets/maps/Mutaha_AAS_1.png", text: "Mutaha: AAS v1", size: 3500 },
        { value: "assets/maps/Mutaha_AAS_2.png", text: "Mutaha: AAS v2", size: 3500 },
        { value: "assets/maps/Narva_AAS_1.png", text: "Narva: AAS v1", size: 2790 },
        { value: "assets/maps/Narva_AAS_2.png", text: "Narva: AAS v2", size: 2790 },
        { value: "assets/maps/Narva_AAS_3.png", text: "Narva: AAS v3", size: 2790 },
        { value: "assets/maps/SanxianIslands_AAS_1.png", text: "Sanxian Islands: AAS v1", size: 3400 },
        { value: "assets/maps/SanxianIslands_AAS_2.png", text: "Sanxian Islands: AAS v2", size: 3400 },
        { value: "assets/maps/SanxianIslands_AAS_3.png", text: "Sanxian Islands: AAS v3", size: 3400 },
        { value: "assets/maps/SumariBala_AAS_1.png", text: "Sumari Bala: AAS v1", size: 1298 },
        { value: "assets/maps/SumariBala_AAS_2.png", text: "Sumari Bala: AAS v2", size: 1298 },
        { value: "assets/maps/SumariBala_AAS_3.png", text: "Sumari Bala: AAS v3", size: 1298 },
        { value: "assets/maps/TalilOutskirts_AAS_1.png", text: "Talil Outskirts: AAS v1", size: 3800 },
        { value: "assets/maps/Yehorivka_AAS_1.png", text: "Yehorivka: AAS v1", size: 4029 },
        { value: "assets/maps/Yehorivka_AAS_2.png", text: "Yehorivka: AAS v2", size: 4029 }
    ],
    "Skirmish Layers": [
        { value: "assets/maps/SkirmishLayers/AlBasrah_Skirm_1.png", text: "Al Basrah: Skirmish v1", size: 3199 },
        { value: "assets/maps/SkirmishLayers/AlBasrah_Skirm_2.png", text: "Al Basrah: Skirmish v2", size: 3199 },
        { value: "assets/maps/SkirmishLayers/Anvil_Skirm.png", text: "Anvil: Skirmish", size: 3500 },
        { value: "assets/maps/SkirmishLayers/BelayaPass_Skirm.png", text: "Belaya Pass: Skirmish", size: 3910 },
        { value: "assets/maps/SkirmishLayers/BlackCoast_Skirm.png", text: "Black Coast: Skirmish", size: 3800 },
        { value: "assets/maps/SkirmishLayers/Chora_Skirm.png", text: "Chora: Skirmish", size: 4078 },
        { value: "assets/maps/SkirmishLayers/Fallujah_Skirm_2.png", text: "Fallujah: Skirmish v2", size: 3500 },
        { value: "assets/maps/SkirmishLayers/FoolsRoad_Skirm_1.png", text: "Fool's Road: Skirmish v1", size: 1732 },
        { value: "assets/maps/SkirmishLayers/FoolsRoad_Skirm_2.png", text: "Fool's Road: Skirmish v2", size: 1732 },
        { value: "assets/maps/SkirmishLayers/GooseBay_Skirmish.png", text: "Goose Bay: Skirmish", size: 3500 },
        { value: "assets/maps/SkirmishLayers/Gorodock_Skirm.png", text: "Gorodok: Skirmish", size: 4320 },
        { value: "assets/maps/SkirmishLayers/Harju_Skirm_1.png", text: "Harju: Skirmish v1", size: 3200 },
        { value: "assets/maps/SkirmishLayers/Harju_Skrim_2.png", text: "Harju: Skirmish v2", size: 3200 },
        { value: "assets/maps/SkirmishLayers/KamdeshHighlands_Skirm.png", text: "Kamdesh Highlands: Skirmish", size: 3600 },
        { value: "assets/maps/SkirmishLayers/KohatToi_Skirm.png", text: "Kohat Toi: Skirmish", size: 3999 },
        { value: "assets/maps/SkirmishLayers/Kokan_Skirm.png", text: "Kokan: Skirmish", size: 2489 },
        { value: "assets/maps/SkirmishLayers/LashkarValley_Skirm.png", text: "Lashkar Valley: Skirmish", size: 3200 },
        { value: "assets/maps/SkirmishLayers/LogarValley_Skirm.png", text: "Logar Valley: Skirmish", size: 1763 },
        { value: "assets/maps/SkirmishLayers/Manicougan_Skirm_1.png", text: "Manicougan: Skirmish v1", size: 3800 },
        { value: "assets/maps/SkirmishLayers/Manicougan_Skirm_2.png", text: "Manicougan: Skirmish v2", size: 3800 },
        { value: "assets/maps/SkirmishLayers/Manicougan_Skirm_3.png", text: "Manicougan: Skirmish v3", size: 3800 },
        { value: "assets/maps/SkirmishLayers/Mestia_Skirm.png", text: "Mestia: Skirmish", size: 2393 },
        { value: "assets/maps/SkirmishLayers/Mutaha_Skirm.png", text: "Mutaha: Skirmish", size: 3500 },
        { value: "assets/maps/SkirmishLayers/Narva_Skirm.png", text: "Narva: Skirmish", size: 2790 },
        { value: "assets/maps/SkirmishLayers/Sanxian_Skirm.png", text: "Sanxian: Skirmish", size: 3400 },
        { value: "assets/maps/SkirmishLayers/Skorpo_Skirm.png", text: "Skorpo: Skirmish", size: 3600 },
        { value: "assets/maps/SkirmishLayers/SumariBala_Skirm.png", text: "Sumari Bala: Skirmish", size: 1298 },
        { value: "assets/maps/SkirmishLayers/TalilOutskirts_Skirm_1.png", text: "Talil Outskirts: Skirmish v1", size: 3800 },
        { value: "assets/maps/SkirmishLayers/TalilOutskirts_Skirm_2.png", text: "Talil Outskirts: Skirmish v2", size: 3800 },
        { value: "assets/maps/SkirmishLayers/TalilOutskirts_Skirm_3.png", text: "Talil Outskirts: Skirmish v3", size: 3800 },
        { value: "assets/maps/SkirmishLayers/Yehorivka_Skirmish_1.png", text: "Yehorivka: Skirmish v1", size: 4029 },
        { value: "assets/maps/SkirmishLayers/Yehorivka_Skirmish_2.png", text: "Yehorivka: Skirmish v2", size: 4029 }
    ]
};

// Mortar calculator constants from Squad
// Format: [range in meters, elevation in mils]
export const mortarRangeTable = [
    [50, 1579], [100, 1558], [150, 1538], [200, 1517], 
    [250, 1496], [300, 1475], [350, 1453], [400, 1431], 
    [450, 1409], [500, 1387], [550, 1364], [600, 1341], 
    [650, 1317], [700, 1292], [750, 1267], [800, 1240], 
    [850, 1212], [900, 1183], [950, 1152], [1000, 1118], 
    [1050, 1081], [1100, 1039], [1150, 988], [1200, 918], 
    [1250, 800]
];

// Maximum mortar range in meters
export const MAX_MORTAR_RANGE = 1250;

// Calculate mortar elevation based on distance using linear interpolation
export function calculateMortarElevation(distance) {
    // Check if distance is within valid range
    if (distance < 0) return null;
    if (distance > MAX_MORTAR_RANGE) return null;
    
    // Find the range table entries that bracket the target distance
    for (let i = 0; i < mortarRangeTable.length - 1; i++) {
        const [range1, elevation1] = mortarRangeTable[i];
        const [range2, elevation2] = mortarRangeTable[i + 1];
        
        if (distance >= range1 && distance <= range2) {
            // Linear interpolation
            return elevation1 + (elevation2 - elevation1) * 
                  ((distance - range1) / (range2 - range1));
        }
    }
    
    // If we get here, the distance is below the minimum range
    return mortarRangeTable[0][1];
}

// Calculate bearing between two points on the map
export function calculateBearing(x1, y1, x2, y2) {
    const dx = x2 - x1;
    const dy = y2 - y1;
    
    // Convert from canvas coordinates to compass bearings
    // In canvas, 0,0 is top-left, but for compass 0 is North (up)
    let degrees = Math.atan2(dx, -dy) * 180 / Math.PI;
    
    // Ensure we get a value between 0-360
    if (degrees < 0) {
        degrees += 360;
    }
    
    return Math.round(degrees * 10) / 10; // Round to 1 decimal place
}

// Calculate distance between two points on the map
export function calculateDistance(x1, y1, x2, y2, mapSize) {
    const dx = x2 - x1;
    const dy = y2 - y1;
    
    // Euclidean distance
    const pixelDistance = Math.sqrt(dx * dx + dy * dy);
    
    // Convert pixel distance to meters based on map size
    // Assuming the canvas width represents the map size in meters
    const metersPerPixel = mapSize / Math.max(
        document.getElementById("mapCanvas").width,
        document.getElementById("mapCanvas").height
    );
    
    return Math.round(pixelDistance * metersPerPixel);
}

// Get current map size in meters
export function getCurrentMapSize() {
    const selectedMap = document.getElementById("mapSelect").value;
    
    // Search for the selected map in all map categories
    for (const category in mapData) {
        for (const map of mapData[category]) {
            if (map.value === selectedMap) {
                return map.size;
            }
        }
    }
    
    // Default size if not found
    return 4000;
}
